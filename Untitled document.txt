from http.server import HTTPServer, SimpleHTTPRequestHandler
import os

# Path to the "Photo For Cam" folder
directory_to_serve = "/home/pi/Desktop/Photo For Cam"  # Replace with your correct path

# Verify the folder exists
if not os.path.exists(directory_to_serve):
    print(f"Error: The folder {directory_to_serve} does not exist.")
    exit(1)

# Change working directory to the folder
os.chdir(directory_to_serve)

# Set up the server
server_address = ('0.0.0.0', 8000)  # Accessible by other devices
httpd = HTTPServer(server_address, SimpleHTTPRequestHandler)

print(f"Serving files from {directory_to_serve}")
print("Access it on the server's local browser: http://127.0.0.1:8000")
print("Access it from other devices: http://<your-ip>:8000 (replace <your-ip> with your IP)")

try:
    httpd.serve_forever()
except KeyboardInterrupt:
    print("\nShutting down the server.")
    httpd.server_close()
