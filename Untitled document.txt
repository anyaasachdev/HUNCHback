from flask import Flask, send_from_directory
import os

app = Flask(__name__)

# Path to the directory you want to serve
directory_to_serve = "/home/pi/Desktop"  # Replace with the folder you want to serve

# Ensure the directory exists
if not os.path.exists(directory_to_serve):
    raise FileNotFoundError(f"The directory {directory_to_serve} does not exist!")

@app.route('/')
def list_files():
    """Serve the directory index."""
    return f"Serving files from: {directory_to_serve}"

@app.route('/<path:filename>')
def send_file(filename):
    """Send a specific file from the directory."""
    try:
        return send_from_directory(directory_to_serve, filename)
    except FileNotFoundError:
        return "File not found", 404

if __name__ == '__main__':
    # Use 0.0.0.0 to make the server accessible on your network
    app.run(host='0.0.0.0', port=8000)
